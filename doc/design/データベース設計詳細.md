# ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒª - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆè©³ç´°æ›¸

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

ã“ã®ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã¯ã€AWS AppSyncã¨DynamoDBã‚’ä½¿ç”¨ã—ãŸã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®ç‰¹å¾´ã‚’æ´»ã‹ã—ã€é«˜ã„ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨å¯ç”¨æ€§ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

```mermaid
flowchart TB
    subgraph "Frontend Layer"
        React[React Application]
        GraphQL[GraphQL Client]
    end
    
    subgraph "API Layer"
        AppSync[AWS AppSync]
        Cognito[Amazon Cognito]
        Resolvers[JavaScript Resolvers]
    end
    
    subgraph "Data Layer"
        DynamoDB[(DynamoDB)]
        subgraph "Tables"
            RoomTable[Room Table]
            MessageTable[Message Table]
        end
    end
    
    React --> GraphQL
    GraphQL --> AppSync
    AppSync --> Cognito
    AppSync --> Resolvers
    Resolvers --> DynamoDB
    DynamoDB --> RoomTable
    DynamoDB --> MessageTable
```

## 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŠ€è¡“é¸æŠç†ç”±

### 2.1 DynamoDBé¸æŠç†ç”±

```mermaid
flowchart TB
    subgraph "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ€§èƒ½ãƒ»ã‚³ã‚¹ãƒˆæ¯”è¼ƒ"
        direction TB
        
        subgraph High_Performance["é«˜æ€§èƒ½"]
            DynamoDB["ğŸš€ DynamoDB<br/>é«˜æ€§èƒ½ãƒ»é«˜ã‚³ã‚¹ãƒˆ"]
            Redis["âš¡ Redis<br/>è¶…é«˜æ€§èƒ½ãƒ»ä½ã‚³ã‚¹ãƒˆ"]
            MongoDB["ğŸƒ MongoDB<br/>é«˜æ€§èƒ½ãƒ»ä¸­ã‚³ã‚¹ãƒˆ"]
        end
        
        subgraph Mid_Performance["ä¸­æ€§èƒ½"]
            PostgreSQL["ğŸ˜ PostgreSQL<br/>ä¸­æ€§èƒ½ãƒ»ä¸­ã‚³ã‚¹ãƒˆ"]
            MySQL["ğŸ¬ MySQL<br/>ä¸­æ€§èƒ½ãƒ»ä½ã‚³ã‚¹ãƒˆ"]
        end
    end
    
    style DynamoDB fill:#ff9999,stroke:#333,stroke-width:3px
    style Redis fill:#99ff99,stroke:#333,stroke-width:2px
    style MongoDB fill:#ffff99,stroke:#333,stroke-width:2px
    style PostgreSQL fill:#99ccff,stroke:#333,stroke-width:2px
    style MySQL fill:#ccccff,stroke:#333,stroke-width:2px
```

| ç‰¹å¾´ | DynamoDB | PostgreSQL | MongoDB |
|------|----------|------------|---------|
| ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜… | â˜…â˜…â˜…â˜… |
| ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ | â˜…â˜…â˜…â˜…â˜… | â˜…â˜…â˜… | â˜…â˜…â˜…â˜… |
| é‹ç”¨ã‚³ã‚¹ãƒˆ | â˜…â˜…â˜…â˜… | â˜…â˜… | â˜…â˜…â˜… |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ | â˜…â˜…â˜…â˜…â˜… | â˜…â˜… | â˜…â˜…â˜… |
| å­¦ç¿’ã‚³ã‚¹ãƒˆ | â˜…â˜…â˜… | â˜…â˜…â˜…â˜… | â˜…â˜…â˜…â˜… |

### 2.2 NoSQLè¨­è¨ˆåŸå‰‡

```mermaid
flowchart TD
    Root["ğŸ¯ NoSQLè¨­è¨ˆåŸå‰‡"] --> A["ğŸ“Š éæ­£è¦åŒ–"]
    Root --> B["ğŸ¯ ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸»å°"]
    Root --> C["ğŸ“ˆ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£"]
    Root --> D["âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹"]
    
    A --> A1["ãƒ‡ãƒ¼ã‚¿é‡è¤‡ã‚’è¨±å®¹"]
    A --> A2["èª­ã¿å–ã‚Šæœ€é©åŒ–"]
    A --> A3["çµåˆæ“ä½œã®å›é¿"]
    
    B --> B1["ã‚¯ã‚¨ãƒªãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆè¨­è¨ˆ"]
    B --> B2["ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥"]
    B --> B3["ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³è¨­è¨ˆ"]
    
    C --> C1["æ°´å¹³åˆ†æ•£"]
    C --> C2["ãƒ›ãƒƒãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³å›é¿"]
    C --> C3["è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°"]
    
    D --> D1["å˜ä¸€æ¡ãƒŸãƒªç§’ãƒ¬ã‚¹ãƒãƒ³ã‚¹"]
    D --> D2["ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆä¿è¨¼"]
    D --> D3["äºˆæ¸¬å¯èƒ½ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹"]
    
    style Root fill:#ff9999,stroke:#333,stroke-width:3px
    style A fill:#ffcc99,stroke:#333,stroke-width:2px
    style B fill:#99ccff,stroke:#333,stroke-width:2px
    style C fill:#99ff99,stroke:#333,stroke-width:2px
    style D fill:#ffff99,stroke:#333,stroke-width:2px
```

## 3. ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆè©³ç´°

### 3.1 Roomãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```mermaid
classDiagram
    class ROOM {
        +string id PK
        +string name
        +string owner
        +string createdAt
    }
    
    class ROOM_GSI1 {
        +string owner PK
        +string id SK
        +string name
        +string createdAt
    }
```

#### 3.1.1 ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ

```mermaid
flowchart LR
    subgraph "Primary Key Access"
        PK1[id â†’ ãƒ«ãƒ¼ãƒ è©³ç´°å–å¾—]
    end
    
    subgraph "GSI1 Access"
        GSI1[owner â†’ ä½œæˆãƒ«ãƒ¼ãƒ ä¸€è¦§]
    end
    
    subgraph "Use Cases"
        UC1[ãƒ«ãƒ¼ãƒ æƒ…å ±è¡¨ç¤º]
        UC2[ãƒã‚¤ãƒ«ãƒ¼ãƒ ä¸€è¦§]
        UC3[ãƒ«ãƒ¼ãƒ ä½œæˆ]
        UC4[ãƒ«ãƒ¼ãƒ å‰Šé™¤]
    end
    
    UC1 --> PK1
    UC2 --> GSI1
    UC3 --> PK1
    UC4 --> PK1
```

#### 3.1.2 ãƒ‡ãƒ¼ã‚¿ã‚µãƒ³ãƒ—ãƒ«

| id | name | owner | createdAt |
|----|------|-------|-----------|
| `room_001` | "é–‹ç™ºãƒãƒ¼ãƒ " | "alice" | "2025-01-01T09:00:00Z" |
| `room_002` | "é›‘è«‡éƒ¨å±‹" | "bob" | "2025-01-02T10:30:00Z" |
| `room_003` | "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆA" | "alice" | "2025-01-03T14:15:00Z" |

### 3.2 Messageãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

```mermaid
classDiagram
    class MESSAGE {
        +string id PK
        +string text
        +string user
        +string roomId
        +string createdAt
    }
    
    class MESSAGE_GSI1 {
        +string user PK
        +string createdAt SK
        +string roomId
        +string text
    }
    
    class MESSAGE_GSI2 {
        +string roomId PK
        +string createdAt SK
        +string user
        +string text
    }
```

#### 3.2.1 ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ

```mermaid
flowchart TB
    subgraph "Query Patterns"
        Q1[ç‰¹å®šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—<br/>id]
        Q2[ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿å±¥æ­´<br/>user + createdAt]
        Q3[ãƒ«ãƒ¼ãƒ å†…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸<br/>roomId + createdAt]
        Q4[ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ«ãƒ¼ãƒ æ¤œç´¢<br/>user â†’ distinct roomId]
    end
    
    subgraph "Index Usage"
        PK[Primary Key<br/>id]
        GSI1[user-index<br/>user, createdAt]
        GSI2[room-index<br/>roomId, createdAt]
    end
    
    Q1 --> PK
    Q2 --> GSI1
    Q3 --> GSI2
    Q4 --> GSI1
```

#### 3.2.2 æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®æœ€é©åŒ–

```mermaid
sequenceDiagram
    participant Client as ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    participant API as AppSync
    participant GSI as room-index
    participant Table as Messageãƒ†ãƒ¼ãƒ–ãƒ«
    
    Note over Client,Table: æœ€æ–°50ä»¶ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—
    
    Client->>API: listMessages(roomId, limit=50)
    API->>GSI: Query roomId, scanIndexForward=false
    GSI->>Table: æœ€æ–°é †ã§ãƒ‡ãƒ¼ã‚¿å–å¾—
    Table-->>GSI: çµæœè¿”å´
    GSI-->>API: ã‚½ãƒ¼ãƒˆæ¸ˆã¿ãƒ‡ãƒ¼ã‚¿
    API-->>Client: æœ€æ–°50ä»¶ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```

#### 3.2.3 ãƒ‡ãƒ¼ã‚¿ã‚µãƒ³ãƒ—ãƒ«

| id | text | user | roomId | createdAt |
|----|------|------|--------|-----------|
| `msg_001` | "ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼" | "alice" | "room_001" | "2025-01-01T09:05:00Z" |
| `msg_002` | "ä»Šæ—¥ã®é€²æ—ã¯ã©ã†ã§ã™ã‹ï¼Ÿ" | "bob" | "room_001" | "2025-01-01T09:10:00Z" |
| `msg_003` | "ãƒã‚°ã‚’ä¿®æ­£ã—ã¾ã—ãŸ" | "alice" | "room_001" | "2025-01-01T09:15:00Z" |

## 4. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥

### 4.1 Global Secondary Indexè¨­è¨ˆ

```mermaid
flowchart TB
    subgraph "Room Table"
        RPK[Primary Key: id]
        RGSI1[GSI1: owner-index]
    end
    
    subgraph "Message Table"
        MPK[Primary Key: id]
        MGSI1[GSI1: user-index]
        MGSI2[GSI2: room-index]
    end
    
    subgraph "Access Patterns"
        AP1[ãƒ«ãƒ¼ãƒ è©³ç´°å–å¾—]
        AP2[ä½œæˆãƒ«ãƒ¼ãƒ ä¸€è¦§]
        AP3[ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è©³ç´°]
        AP4[ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿å±¥æ­´]
        AP5[ãƒ«ãƒ¼ãƒ å†…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
    end
    
    AP1 --> RPK
    AP2 --> RGSI1
    AP3 --> MPK
    AP4 --> MGSI1
    AP5 --> MGSI2
```

## 5. ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³è¨­è¨ˆ

### 5.1 ãƒ›ãƒƒãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³å›é¿æˆ¦ç•¥

```mermaid
gantt
    title ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³è² è·åˆ†æ•£ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    dateFormat X
    axisFormat %H:%M
    
    section Partition A
    Low Load    :a1, 0, 8
    Medium Load :a2, 8, 4
    High Load   :a3, 12, 2
    Low Load    :a4, 14, 10
    
    section Partition B
    Medium Load :b1, 0, 6
    High Load   :b2, 6, 3
    Low Load    :b3, 9, 6
    Medium Load :b4, 15, 9
    
    section Partition C
    High Load   :c1, 0, 3
    Low Load    :c2, 3, 8
    Medium Load :c3, 11, 5
    High Load   :c4, 16, 8
```

### 5.2 ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

```mermaid
flowchart LR
    subgraph "Data Distribution"
        A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ID Hash] --> B[ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³1]
        A --> C[ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³2]
        A --> D[ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³3]
        A --> E[ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³N]
    end
    
    subgraph "Load Balancing"
        F[Auto Scaling] --> G[Read Capacity]
        F --> H[Write Capacity]
        I[CloudWatch] --> F
    end
    
    B --> F
    C --> F
    D --> F
    E --> F
```

## 6. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³

### 6.1 One-to-Manyé–¢ä¿‚ã®å®Ÿè£…

```mermaid
classDiagram
    class Room {
        +string id
        +string name
        +string owner
        +string createdAt
        +getMessages() Message[]
    }
    
    class Message {
        +string id
        +string text
        +string user
        +string roomId
        +string createdAt
        +getRoom() Room
    }
    
    Room "1" --> "0..*" Message : contains
```

### 6.2 éæ­£è¦åŒ–ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³

```mermaid
flowchart TB
    subgraph "Normalized (RDBMS Pattern)"
        N1[Room Table] --> N2[Message Table]
        N2 --> N3[User Table]
        N4[JOIN Operations Required]
    end
    
    subgraph "Denormalized (NoSQL Pattern)"
        D1[Message Table<br/>+ user name<br/>+ room name]
        D2[Single Query Access]
    end
    
    N4 -.->|Transform| D2
    
    style N4 fill:#ff6b6b
    style D2 fill:#51cf66
```

## 7. å®¹é‡è¨­è¨ˆ

### 8.1 ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡è¦‹ç©ã‚‚ã‚Š

```mermaid
flowchart TB
    subgraph "Capacity Planning"
        A[æ—¥æ¬¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°<br/>10,000ä»¶] --> B[1ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¹³å‡<br/>500 bytes]
        B --> C[æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿å¢—åŠ <br/>5MB]
        C --> D[å¹´é–“ãƒ‡ãƒ¼ã‚¿å¢—åŠ <br/>1.8GB]
        D --> E[3å¹´ä¿æŒ<br/>5.4GB]
    end
    
    subgraph "Storage Cost"
        F[$0.25/GB/æœˆ]
        E --> F
        F --> G[æœˆé¡ $1.35]
    end
```

### 8.2 ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯è¨­è¨ˆ

```mermaid
flowchart TB
    subgraph "24æ™‚é–“ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‘ã‚¿ãƒ¼ãƒ³"
        A[æ·±å¤œ 00-06æ™‚<br/>å¹³æ—¥: 50-200 RCU/ç§’<br/>ä¼‘æ—¥: 30-100 RCU/ç§’] 
        B[æœ 06-12æ™‚<br/>å¹³æ—¥: 200-950 RCU/ç§’<br/>ä¼‘æ—¥: 100-600 RCU/ç§’]
        C[æ˜¼ 12-18æ™‚<br/>å¹³æ—¥: 600-900 RCU/ç§’<br/>ä¼‘æ—¥: 650-800 RCU/ç§’]
        D[å¤œ 18-24æ™‚<br/>å¹³æ—¥: 400-600 RCU/ç§’<br/>ä¼‘æ—¥: 300-600 RCU/ç§’]
    end
    
    A --> B
    B --> C  
    C --> D
    D --> A
    
    style B fill:#ff6b6b
    style C fill:#ffd93d
    style A fill:#6bcf7f
    style D fill:#4d96ff
```

**ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ç‰¹æ€§:**
- **ãƒ”ãƒ¼ã‚¯æ™‚é–“**: å¹³æ—¥ 09:00-10:00 (950 RCU/ç§’)
- **ã‚ªãƒ•ãƒ”ãƒ¼ã‚¯**: æ·±å¤œ 02:00-05:00 (50 RCU/ç§’)
- **ä¼‘æ—¥ãƒ‘ã‚¿ãƒ¼ãƒ³**: ã‚ˆã‚Šå‡ç­‰ãªåˆ†æ•£ã€ãƒ”ãƒ¼ã‚¯ã¯ä½ã‚

## 9. ç›£è¦–ãƒ»é‹ç”¨

### 9.1 ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç›£è¦–

```mermaid
flowchart TD
    Root["ğŸ“Š DynamoDBç›£è¦–"] --> A["âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹"]
    Root --> B["ğŸ’¾ å®¹é‡"]
    Root --> C["ğŸ’° ã‚³ã‚¹ãƒˆ"]
    Root --> D["âŒ ã‚¨ãƒ©ãƒ¼"]
    
    A --> A1["èª­ã¿å–ã‚Šãƒ¬ã‚¤ãƒ†ãƒ³ã‚·"]
    A --> A2["æ›¸ãè¾¼ã¿ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·"]
    A --> A3["ã‚¹ãƒ­ãƒƒãƒˆãƒ«ã‚¨ãƒ©ãƒ¼"]
    A --> A4["æˆåŠŸç‡"]
    
    B --> B1["æ¶ˆè²»RCU/WCU"]
    B --> B2["ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡"]
    B --> B3["ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚µã‚¤ã‚º"]
    
    C --> C1["RCU/WCUã‚³ã‚¹ãƒˆ"]
    C --> C2["ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ"]
    C --> C3["ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚³ã‚¹ãƒˆ"]
    
    D --> D1["4xx ã‚¨ãƒ©ãƒ¼"]
    D --> D2["5xx ã‚¨ãƒ©ãƒ¼"]
    D --> D3["ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ"]
    D --> D4["ãƒªãƒˆãƒ©ã‚¤å›æ•°"]
    
    style Root fill:#ff9999,stroke:#333,stroke-width:3px
    style A fill:#ffcc99,stroke:#333,stroke-width:2px
    style B fill:#99ccff,stroke:#333,stroke-width:2px
    style C fill:#99ff99,stroke:#333,stroke-width:2px
    style D fill:#ffaaaa,stroke:#333,stroke-width:2px
```

### 9.2 ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

```mermaid
flowchart TB
    subgraph "Monitoring Metrics"
        M1[Read Latency > 100ms]
        M2[Write Latency > 50ms]
        M3[Error Rate > 1%]
        M4[Throttling > 0]
        M5[Capacity > 80%]
    end
    
    subgraph "Alert Actions"
        A1[Slacké€šçŸ¥]
        A2[ãƒ¡ãƒ¼ãƒ«é€šçŸ¥]
        A3[Auto Scaling]
        A4[Lambdaé–¢æ•°å®Ÿè¡Œ]
    end
    
    M1 --> A1
    M2 --> A1
    M3 --> A2
    M4 --> A3
    M5 --> A3
```

## 10. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 10.1 ãƒ‡ãƒ¼ã‚¿ä¿è­·

```mermaid
flowchart LR
    subgraph "Data Protection"
        A[Encryption at Rest<br/>KMS] --> B[Encryption in Transit<br/>TLS 1.2+]
        B --> C[Access Control<br/>IAM Roles]
        C --> D[Audit Logging<br/>CloudTrail]
    end
    
    subgraph "Security Measures"
        E[VPC Endpoints]
        F[Resource-based Policies]
        G[Fine-grained Access]
        H[Backup Encryption]
    end
    
    A --> E
    B --> F
    C --> G
    D --> H
```

### 10.2 ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant Cognito as Cognito
    participant AppSync as AppSync
    participant IAM as IAM Role
    participant DDB as DynamoDB
    
    User->>Cognito: èªè¨¼
    Cognito-->>User: JWT Token
    User->>AppSync: GraphQL Request + Token
    AppSync->>IAM: AssumeRole
    IAM-->>AppSync: Temporary Credentials
    AppSync->>DDB: Query with Credentials
    DDB-->>AppSync: Response
    AppSync-->>User: GraphQL Response
```

## 11. ç½å®³å¾©æ—§ãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

### 11.1 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥

```mermaid
flowchart LR
    subgraph "ğŸ“… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©æ—§æˆ¦ç•¥"
        direction TB
        
        subgraph "ğŸ”„ è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"
            A1["Point-in-time Recovery<br/>ç¶™ç¶šçš„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—<br/>35æ—¥é–“ä¿æŒ"]
        end
        
        subgraph "ğŸ“‹ æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"
            B1["é€±æ¬¡ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—<br/>å®Œå…¨ãªãƒ†ãƒ¼ãƒ–ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—<br/>1å¹´é–“ä¿æŒ"]
        end
        
        subgraph "ğŸŒ Cross-Region"
            C1["DynamoDB Global Tables<br/>åˆ¥ãƒªãƒ¼ã‚¸ãƒ§ãƒ³è¤‡è£½<br/>ç½å®³å¾©æ—§ç”¨"]
        end
    end
    
    style A1 fill:#99ff99,stroke:#333,stroke-width:2px
    style B1 fill:#ffcc99,stroke:#333,stroke-width:2px
    style C1 fill:#ff9999,stroke:#333,stroke-width:2px
```

### 11.2 å¾©æ—§æ‰‹é †

```mermaid
flowchart TB
    A[éšœå®³æ¤œçŸ¥] --> B{å½±éŸ¿ç¯„å›²åˆ¤å®š}
    B -->|éƒ¨åˆ†éšœå®³| C[Point-in-time Recovery]
    B -->|å…¨ä½“éšœå®³| D[Cross-Region Failover]
    B -->|ãƒ‡ãƒ¼ã‚¿ç ´æ| E[æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§]
    
    C --> F[ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºèª]
    D --> F
    E --> F
    
    F --> G[ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¾©æ—§ç¢ºèª]
    G --> H[ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ å¾©æ—§]
    H --> I[ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥]
```

---

*ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã®DynamoDBãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®è©³ç´°ã‚’èª¬æ˜ã—ã¦ã„ã¾ã™ã€‚NoSQLè¨­è¨ˆåŸå‰‡ã«åŸºã¥ãã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§é«˜æ€§èƒ½ãªãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚*
