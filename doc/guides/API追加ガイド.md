# ğŸš€ AWS AppSync APIè¿½åŠ ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€AWS AppSyncãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã«æ–°ã—ã„APIã‚’ç°¡å˜ã«è¿½åŠ ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

1. [APIè¿½åŠ ã®åŸºæœ¬çš„ãªæµã‚Œ](#apiè¿½åŠ ã®åŸºæœ¬çš„ãªæµã‚Œ)
2. [ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½¿ã„æ–¹](#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½¿ã„æ–¹)
3. [å®Ÿè£…ä¾‹ï¼šã„ã„ã­æ©Ÿèƒ½](#å®Ÿè£…ä¾‹ã„ã„ã­æ©Ÿèƒ½)
4. [ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ç¢ºèªæ‰‹é †](#ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ç¢ºèªæ‰‹é †)
5. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## ğŸ”„ APIè¿½åŠ ã®åŸºæœ¬çš„ãªæµã‚Œ

æ–°ã—ã„APIã‚’è¿½åŠ ã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã®é †åºã§ä½œæ¥­ã‚’é€²ã‚ã¾ã™ï¼š

```mermaid
graph TD
    A[1.GraphQLã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©] --> B[2.DynamoDBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ]
    B --> C[3.ãƒªã‚¾ãƒ«ãƒãƒ¼ä½œæˆ]
    C --> D[4.Terraformè¨­å®šè¿½åŠ ]
    D --> E[5.ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…]
    E --> F[6.ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤]
```

### å„ã‚¹ãƒ†ãƒƒãƒ—ã®è©³ç´°

1. **GraphQLã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©** (`schema.graphql`)
   - ãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼ˆTypeï¼‰ã®å®šç¾©
   - ã‚¯ã‚¨ãƒªãƒ»ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®å®šç¾©

2. **DynamoDBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ** (`infra/dynamodb.tf`)
   - ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
   - Terraformã§ã®ãƒªã‚½ãƒ¼ã‚¹å®šç¾©

3. **ãƒªã‚¾ãƒ«ãƒãƒ¼ä½œæˆ** (`resolvers/`)
   - JavaScriptã§ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯
   - ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†

4. **Terraformè¨­å®šè¿½åŠ ** (`infra/resolvers.tf`)
   - ãƒªã‚¾ãƒ«ãƒãƒ¼ã¨ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®è¨­å®š
   - AppSyncã¨ã®é€£æºè¨­å®š

5. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…** (`src/`)
   - GraphQLã‚¯ã‚¨ãƒªãƒ»ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³
   - Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ

6. **ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤**
   - å‹•ä½œç¢ºèªã¨ãƒ‡ãƒãƒƒã‚°
   - æœ¬ç•ªç’°å¢ƒã¸ã®é©ç”¨

## ğŸ“ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½¿ã„æ–¹

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª

ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š
- ğŸ“ `doc/templates/` ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

### ã‚¹ãƒ†ãƒƒãƒ—2: å¿…è¦ãªéƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼

1. **GraphQLã‚¹ã‚­ãƒ¼ãƒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ** ã‹ã‚‰å¿…è¦ãªéƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼
2. **Terraformãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ** ã‹ã‚‰å¿…è¦ãªéƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼
3. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ** ã‹ã‚‰å¿…è¦ãªéƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼

### ã‚¹ãƒ†ãƒƒãƒ—3: è‡ªåˆ†ã®æ©Ÿèƒ½ã«åˆã‚ã›ã¦ä¿®æ­£

```javascript
// ä¾‹ï¼šã„ã„ã­æ©Ÿèƒ½ â†’ ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã«å¤‰æ›´ã™ã‚‹å ´åˆ
// Before:
type Like {
    id: ID!
    messageId: ID!
    userId: String!
}

// After:
type Comment {
    id: ID!
    messageId: ID!
    userId: String!
    content: String!  // ã‚³ãƒ¡ãƒ³ãƒˆå†…å®¹ã‚’è¿½åŠ 
}
```

### ã‚¹ãƒ†ãƒƒãƒ—4: æ®µéšçš„ã«å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ

å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’ä¸€ã¤ãšã¤å®Ÿè£…ã—ã€å‹•ä½œç¢ºèªã‚’è¡Œã„ãªãŒã‚‰é€²ã‚ã¦ãã ã•ã„ã€‚

## ğŸ¯ å®Ÿè£…ä¾‹ï¼šã„ã„ã­æ©Ÿèƒ½

ã€Œã„ã„ã­æ©Ÿèƒ½ã€ã‚’ä¾‹ã«ã€å®Ÿéš›ã®å®Ÿè£…æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### Phase 1: è¨­è¨ˆãƒ»æº–å‚™

1. **è¦ä»¶å®šç¾©**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã„ã„ã­ã§ãã‚‹
   - ã„ã„ã­æ•°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤º
   - é‡è¤‡ã„ã„ã­ã¯ä¸å¯

2. **ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ**
   ```
   Like ãƒ†ãƒ¼ãƒ–ãƒ«:
   - id (ä¸»ã‚­ãƒ¼)
   - messageId (GSI)
   - userId (GSI) 
   - userName
   - createdAt
   ```

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

1. **GraphQLã‚¹ã‚­ãƒ¼ãƒè¿½åŠ **
   - `Like` ã‚¿ã‚¤ãƒ—ã®å®šç¾©
   - `addLike`, `removeLike`, `getLikes` ã®å®šç¾©

2. **DynamoDBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ**
   - Likesãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å®šç¾©

3. **ãƒªã‚¾ãƒ«ãƒãƒ¼å®Ÿè£…**
   - ã„ã„ã­è¿½åŠ ãƒ»å‰Šé™¤ãƒ»å–å¾—ã®ãƒ­ã‚¸ãƒƒã‚¯

### Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

1. **GraphQLæ“ä½œå®šç¾©**
   - Mutation, Query, Subscription ã®å®šç¾©

2. **UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ**
   - LikeButtonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…

3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€£æº**
   - Subscriptionã§ã®å³åº§åæ˜ 

### Phase 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**
   - å„æ©Ÿèƒ½ã®å€‹åˆ¥å‹•ä½œç¢ºèª

2. **çµ±åˆãƒ†ã‚¹ãƒˆ**
   - ãƒ•ãƒ­ãƒ³ãƒˆãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æºç¢ºèª

3. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤**
   - Terraformã§ã®ãƒªã‚½ãƒ¼ã‚¹ä½œæˆ

## ğŸ›  ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ç¢ºèªæ‰‹é †

### 1. äº‹å‰ãƒã‚§ãƒƒã‚¯

```bash
# ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèª
git status

# å¤‰æ›´å†…å®¹ã‚’ç¢ºèª
git diff

# Node.jsä¾å­˜é–¢ä¿‚ã‚’ç¢ºèª
npm list
```

### 2. ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼

```bash
# GraphQLã‚¹ã‚­ãƒ¼ãƒã®æ–‡æ³•ãƒã‚§ãƒƒã‚¯
npm run lint:graphql

# ã¾ãŸã¯æ‰‹å‹•ã§ãƒã‚§ãƒƒã‚¯
npx graphql-schema-linter schema.graphql
```

### 3. ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Terraformã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd infra

# å¤‰æ›´å†…å®¹ã‚’äº‹å‰ç¢ºèªï¼ˆé‡è¦ï¼ï¼‰
terraform plan

# å•é¡Œãªã‘ã‚Œã°é©ç”¨
terraform apply

# å‡ºåŠ›ã•ã‚ŒãŸå€¤ã‚’ç¢ºèª
terraform output
```

### 4. ç’°å¢ƒå¤‰æ•°æ›´æ–°

```bash
# æ–°ã—ã„ç’°å¢ƒå¤‰æ•°ãŒã‚ã‚Œã° .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°
cp .env.example .env
# ã‚¨ãƒ‡ã‚£ã‚¿ã§å¿…è¦ãªå€¤ã‚’è¨­å®š
```

### 5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆ
# http://localhost:3000
```

### 6. APIå‹•ä½œç¢ºèª

AWS AppSync ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§GraphQLã‚¯ã‚¨ãƒªã‚’ãƒ†ã‚¹ãƒˆï¼š

```graphql
# ãƒ†ã‚¹ãƒˆç”¨ã‚¯ã‚¨ãƒªä¾‹
mutation TestAddLike {
  addLike(
    messageId: "test-message-123"
    userId: "test-user-456" 
    userName: "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼"
  ) {
    id
    messageId
    userId
    userName
    createdAt
  }
}

query TestGetLikes {
  getLikes(messageId: "test-message-123") {
    id
    userId
    userName
    createdAt
  }
}
```

## ğŸ§ª ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•

#### 1. ã‚¹ã‚­ãƒ¼ãƒé–¢é€£ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `GraphQL schema validation failed`

**åŸå› ã¨è§£æ±ºæ–¹æ³•**:
```
- å‹åã¯å¤§æ–‡å­—ã§å§‹ã‚ã‚‹ï¼ˆä¾‹ï¼šLike, Messageï¼‰
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¯å°æ–‡å­—ã§å§‹ã‚ã‚‹ï¼ˆä¾‹ï¼šmessageId, userNameï¼‰
- å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯ ! ã‚’ä»˜ã‘ã‚‹ï¼ˆä¾‹ï¼šid: ID!ï¼‰
- ã‚³ãƒ¡ãƒ³ãƒˆã¯ # ã‚’ä½¿ç”¨ï¼ˆä¾‹ï¼š# ã“ã‚Œã¯ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
```

#### 2. Terraformé–¢é€£ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `Error: Resource already exists`

**è§£æ±ºæ–¹æ³•**:
```bash
# æ—¢å­˜ãƒªã‚½ãƒ¼ã‚¹ã‚’Terraformã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
terraform import aws_dynamodb_table.likes existing-table-name

# ã¾ãŸã¯æ—¢å­˜ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰å†ä½œæˆ
```

**ã‚¨ãƒ©ãƒ¼**: `Error: Insufficient permissions`

**è§£æ±ºæ–¹æ³•**:
```bash
# AWSèªè¨¼æƒ…å ±ã‚’ç¢ºèª
aws sts get-caller-identity

# å¿…è¦ã«å¿œã˜ã¦IAMãƒãƒªã‚·ãƒ¼ã‚’è¿½åŠ 
```

#### 3. ãƒªã‚¾ãƒ«ãƒãƒ¼é–¢é€£ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `DynamoDB operation failed`

**è§£æ±ºæ–¹æ³•**:
```javascript
// CloudWatch Logsã§ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’ç¢ºèª
// AWS Console > CloudWatch > Log groups > /aws/appsync/apis/[API-ID]

// ã‚ˆãã‚ã‚‹å•é¡Œï¼š
// 1. ãƒ†ãƒ¼ãƒ–ãƒ«åã®é–“é•ã„
// 2. IAMãƒ­ãƒ¼ãƒ«ã®æ¨©é™ä¸è¶³
// 3. ãƒ‡ãƒ¼ã‚¿å‹ã®ä¸ä¸€è‡´
```

#### 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–¢é€£ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: `GraphQL error: Cannot query field`

**è§£æ±ºæ–¹æ³•**:
```javascript
// ã‚¹ã‚­ãƒ¼ãƒã¨ã‚¯ã‚¨ãƒªã®æ•´åˆæ€§ã‚’ç¢ºèª
// 1. ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®ã‚¹ãƒšãƒ«ãƒŸã‚¹
// 2. å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¸è¶³
// 3. å‹ã®ä¸ä¸€è‡´
```

**ã‚¨ãƒ©ãƒ¼**: `Network error: Failed to fetch`

**è§£æ±ºæ–¹æ³•**:
```javascript
// 1. .env ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šå€¤ã‚’ç¢ºèª
// 2. AppSync APIã®èªè¨¼è¨­å®šã‚’ç¢ºèª
// 3. CORSè¨­å®šã‚’ç¢ºèª
```

#### 5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã®å•é¡Œ

**ã‚¨ãƒ©ãƒ¼**: `Subscription not working`

**è§£æ±ºæ–¹æ³•**:
```graphql
# 1. @aws_subscribe ã® mutations è¨­å®šã‚’ç¢ºèª
type Subscription {
    onLikeAdded(messageId: ID): Like
        @aws_subscribe(mutations: ["addLike"])  # ã“ã“ãŒæ­£ã—ã„ã‹ç¢ºèª
}

# 2. WebSocketæ¥ç¶šã®ç¢ºèª
# ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§WebSocketæ¥ç¶šã‚’ç¢ºèª
```

### ãƒ‡ãƒãƒƒã‚°ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **æ®µéšçš„å®Ÿè£…**
   - ä¸€åº¦ã«å…¨éƒ¨å®Ÿè£…ã›ãšã€æ©Ÿèƒ½ã‚’åˆ†å‰²ã—ã¦å®Ÿè£…
   - å„æ®µéšã§å‹•ä½œç¢ºèªã‚’è¡Œã†

2. **ãƒ­ã‚°æ´»ç”¨**
   ```javascript
   // ãƒªã‚¾ãƒ«ãƒãƒ¼ã«ãƒ­ã‚°ã‚’è¿½åŠ 
   export function request(ctx) {
       console.log('Request context:', JSON.stringify(ctx, null, 2));
       // ... å‡¦ç†
   }
   
   export function response(ctx) {
       console.log('Response context:', JSON.stringify(ctx, null, 2));
       // ... å‡¦ç†
   }
   ```

3. **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ**
   ```bash
   # DynamoDBã«ç›´æ¥ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥
   aws dynamodb put-item \
     --table-name your-table-name \
     --item '{"id": {"S": "test-id"}, "messageId": {"S": "test-message"}}'
   ```

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- ğŸ“– [AWS AppSync Developer Guide](https://docs.aws.amazon.com/appsync/)
- ğŸ“– [GraphQL Schema Definition Language](https://graphql.org/learn/schema/)
- ğŸ“– [DynamoDB Best Practices](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/best-practices.html)
- ğŸ“– [Terraform AWS Provider](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)

### å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹
- ğŸ“ [GraphQLå…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](https://graphql.org/learn/)
- ğŸ“ [React Queryå­¦ç¿’ã‚¬ã‚¤ãƒ‰](https://tanstack.com/query/latest)
- ğŸ“ [AWS AppSync Workshop](https://appsync.workshop.aws/)

### ãƒ„ãƒ¼ãƒ«ãƒ»æ‹¡å¼µæ©Ÿèƒ½
- ğŸ› ï¸ [GraphQL Language Service](https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql) - VS Codeæ‹¡å¼µ
- ğŸ› ï¸ [Apollo Client DevTools](https://www.apollographql.com/docs/react/development-testing/developer-tooling/) - ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µ
- ğŸ› ï¸ [Terraform VS Code Extension](https://marketplace.visualstudio.com/items?itemName=HashiCorp.terraform)

## ï¿½ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ•´åˆæ€§ç¢ºèª

æ–°ã—ã„APIæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹éš›ã¯ã€å¿…ãšãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®æ•´åˆæ€§ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### âœ… ç¢ºèªå¿…é ˆé …ç›®

1. **GraphQLã‚¹ã‚­ãƒ¼ãƒã®æ•´åˆæ€§**
   - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹ã¨å¿…é ˆ/ä»»æ„ã®ä¸€è‡´
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã®çµ±ä¸€
   - ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®å®Œå…¨ä¸€è‡´

2. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã®ç¢ºèª**
   ```javascript
   // æ­£ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆä¾‹
   import { listMessages } from '../graphql/queries';
   import { postMessage, analyzeMessageSentimentMutation } from '../graphql/mutations';
   
   // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ•´åˆæ€§ç¢ºèª
   const result = await client.graphql({
     query: analyzeMessageSentimentMutation,
     variables: {
       messageId,    // ã‚¹ã‚­ãƒ¼ãƒ: messageId: ID!
       text: messageText  // ã‚¹ã‚­ãƒ¼ãƒ: text: String!
     }
   });
   ```

3. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­å®šã®ç¢ºèª**
   ```hcl
   # resolvers.tf - è¨­å®šä¾‹
   resource "aws_appsync_resolver" "analyze_message_sentiment" {
     api_id      = aws_appsync_graphql_api.chat_api.id
     field       = "analyzeMessageSentiment"  # ã‚¹ã‚­ãƒ¼ãƒã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¨ä¸€è‡´
     type        = "Mutation"                 # æ­£ã—ã„ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‹
     data_source = aws_appsync_datasource.lambda_sentiment.name
   }
   ```

### ğŸš¨ ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

1. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã®é–“é•ã„**
   - âŒ Queryã¨Mutationã®æ··åœ¨
   - âœ… é©åˆ‡ãªãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

2. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã®ä¸ä¸€è‡´**
   - âŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: `messageText` â†’ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: `text`
   - âœ… çµ±ä¸€ã•ã‚ŒãŸå‘½åè¦å‰‡ã®ä½¿ç”¨

3. **å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ¬ å¦‚**
   - âŒ `text: String` â†’ `text: String!`
   - âœ… å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ­£ã—ã„å®šç¾©

### ğŸ“ æ•´åˆæ€§ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] GraphQLã‚¹ã‚­ãƒ¼ãƒå®šç¾©å®Œäº†
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰GraphQLæ“ä½œå®šç¾©å®Œäº†
- [ ] ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰Resolverè¨­å®šå®Œäº†
- [ ] ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åãƒ»å‹ã®å®Œå…¨ä¸€è‡´ç¢ºèª
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã®çµ±ä¸€ç¢ºèª
- [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã®æ­£ç¢ºæ€§ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…å®Œäº†

## ï¿½ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **åŸºæœ¬çš„ãªCRUDæ“ä½œã‚’ãƒã‚¹ã‚¿ãƒ¼**
   - ã¾ãšã¯ç®€å˜ãªæ©Ÿèƒ½ã‹ã‚‰å§‹ã‚ã‚‹
   - Create, Read, Update, Delete ã‚’ä¸€é€šã‚Šå®Ÿè£…

2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®ç†è§£**
   - Subscriptionã®æ´»ç”¨æ–¹æ³•ã‚’å­¦ã¶
   - WebSocketã®åŸºæœ¬æ¦‚å¿µã‚’ç†è§£

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
   - DynamoDBã®ã‚¯ã‚¨ãƒªãƒ‘ã‚¿ãƒ¼ãƒ³æœ€é©åŒ–
   - GraphQLã‚¯ã‚¨ãƒªã®åŠ¹ç‡åŒ–

4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–**
   - èªè¨¼ãƒ»èªå¯ã®è©³ç´°è¨­å®š
   - ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã®å®Ÿè£…

---

**ğŸ¯ ã“ã®ã‚¬ã‚¤ãƒ‰ã‚’å‚è€ƒã«ã€æ®µéšçš„ã«APIæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼**
